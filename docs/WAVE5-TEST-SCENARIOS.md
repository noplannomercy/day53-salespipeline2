# Wave 5 기능 테스트 시나리오

> 서버: http://localhost:3010
> 모든 시나리오는 독립적으로 실행 가능합니다.

---

## 시나리오 1: 딜 복제 (W5-1)

**목표:** 기존 딜을 복제하여 유사한 새 딜을 빠르게 생성한다.

### 방법 A — 딜 목록에서 복제
1. 사이드바 → **딜** 클릭
2. 딜 목록에서 임의의 딜 행 우측 액션 버튼 클릭
3. **"복제"** 선택
4. ✅ 목록에 `[원래 딜 제목] (복사본)` 딜이 추가됨
5. ✅ 복제된 딜의 상태는 **open**, 금액/담당자/파이프라인은 원본과 동일

### 방법 B — 딜 상세에서 복제
1. 딜 목록에서 딜 클릭 → 상세 페이지 진입
2. 상단 버튼 중 **"복제"** 클릭
3. ✅ `/deals` 페이지로 이동하며 복제된 딜 확인

---

## 시나리오 2: 칸반 인라인 딜 추가 (W5-2)

**목표:** 칸반 보드에서 스테이지를 선택하며 즉시 딜을 추가한다.

1. 사이드바 → **칸반** 클릭
2. 원하는 스테이지 컬럼 하단의 **"+ 딜 추가"** 버튼 클릭
3. 딜 생성 모달이 열리고 해당 스테이지가 **미리 선택**되어 있음 확인
4. 딜 제목, 금액 입력 후 저장
5. ✅ 해당 스테이지 컬럼에 새 딜 카드가 즉시 표시됨

---

## 시나리오 3: 데이터 백업/복원 (W5-3)

**목표:** 현재 데이터를 JSON으로 내보내고, 초기화 후 복원한다.

### 내보내기
1. 사이드바 → **설정** 클릭
2. **"데이터 내보내기"** 버튼 클릭
3. ✅ `salespipe-backup-[날짜].json` 파일이 다운로드됨
4. 파일 열어보면 `sp_deals`, `sp_contacts` 등 모든 데이터 확인 가능

### 복원 (선택적 테스트)
1. 설정 → **"데이터 초기화"** 로 데이터 리셋 (주의: 되돌릴 수 없음)
2. **"데이터 가져오기"** 버튼 클릭
3. 위에서 저장한 JSON 파일 선택
4. ✅ 성공 메시지 표시 후 페이지 자동 리로드
5. ✅ 딜/컨택 등 이전 데이터 모두 복원됨

---

## 시나리오 4: 가중 파이프라인 가치 (W5-4)

**목표:** 스테이지 성사 확률을 반영한 예상 수익을 확인한다.

### 대시보드
1. 사이드바 → **대시보드** 클릭
2. **Forecast 차트** 확인
3. ✅ 각 스테이지별로 "원래 금액" 바와 "가중 금액" 바가 이중으로 표시됨
4. ✅ 차트 상단에 전체 파이프라인 가치 vs 가중 예측 합계 요약 표시

### 보고서
1. 사이드바 → **보고서** 클릭 → **매출 예측** 탭
2. ✅ 스테이지별 확률(%), 원래 금액, 가중 금액 테이블 확인
3. ✅ 합계 행에서 전체 가중 예측 금액 확인

---

## 시나리오 5: 태그 자동완성 (W5-5)

**목표:** 딜/컨택/기업 폼에서 기존 태그를 검색하여 빠르게 추가한다.

### 딜 폼에서 태그 추가
1. 사이드바 → **딜** → **"딜 추가"** 버튼 클릭
2. 폼 하단 태그 입력 영역에 글자 입력 (예: `vip` 또는 `중요`)
3. ✅ 기존 태그 목록에서 일치하는 태그가 드롭다운으로 표시됨
4. 드롭다운에서 태그 클릭
5. ✅ 선택된 태그가 컬러 뱃지로 표시됨
6. ✅ 뱃지의 **X** 클릭 시 태그 제거됨

### 동일 테스트를 컨택, 기업 폼에서도 확인

---

## 시나리오 6: 컨택 중복 탐지 (W5-6)

**목표:** 이미 등록된 이메일/전화번호로 컨택 저장 시 경고를 받는다.

1. 사이드바 → **연락처** 확인 → 기존 컨택의 이메일 주소 메모
2. **"연락처 추가"** 버튼 클릭
3. 이메일 입력란에 위에서 메모한 **기존 이메일 주소** 입력
4. 이메일 입력란 밖을 클릭 (blur)
5. ✅ 이메일 입력란 아래에 `"동일한 이메일의 연락처가 있습니다: [기존 컨택 이름]"` 경고 텍스트 표시
6. 전화번호로도 동일하게 테스트 가능

---

## 시나리오 7: 알림 패널 (W5-7)

**목표:** 마감이 임박한 활동 알림을 헤더에서 확인한다.

### 알림 생성 조건 만들기
1. 사이드바 → **활동** → **"활동 추가"** 클릭
2. 유형: **업무**, 제목: `긴급 계약 검토`
3. 마감일: **오늘 날짜** 또는 **내일 날짜** 선택
4. 완료 체크 없이 저장

### 알림 확인
1. 헤더 우측 **벨(🔔) 아이콘** 확인
2. ✅ 벨 아이콘 옆에 **미읽음 뱃지** (숫자) 표시됨
3. 벨 아이콘 클릭
4. ✅ 알림 패널 열림 — `"긴급 계약 검토 마감 임박"` 알림 확인
5. 알림 클릭 또는 **"모두 읽음"** 버튼 클릭
6. ✅ 뱃지 숫자 사라짐

---

## 시나리오 8: 딜 변경 이력 (W5-8)

**목표:** 딜의 스테이지/금액 변경이 타임라인에 자동 기록된다.

### 스테이지 변경 이력
1. 사이드바 → **칸반** 클릭
2. 딜 카드를 다른 스테이지 컬럼으로 **드래그&드롭**
3. 해당 딜 클릭 → 상세 페이지 → **타임라인** 탭 클릭
4. ✅ `"stageId 변경: [이전 스테이지] → [새 스테이지]"` 이력 항목 확인

### 금액 변경 이력
1. 딜 상세 → **기본정보** 탭에서 금액 수정 후 저장
2. **타임라인** 탭 이동
3. ✅ `"value 변경: [이전 금액] → [새 금액]"` 이력 항목 확인
4. ✅ 이력 항목은 시간 역순으로 정렬됨

---

## 빠른 체크리스트

| # | 기능 | 진입점 | 핵심 확인 |
|---|------|--------|-----------|
| 1 | 딜 복제 | 딜 목록 행 메뉴 | "(복사본)" 딜 생성 |
| 2 | 칸반 인라인 추가 | 칸반 컬럼 하단 + 버튼 | 스테이지 미리 선택 |
| 3 | 데이터 백업 | 설정 → 내보내기 | JSON 파일 다운로드 |
| 4 | 가중 파이프라인 | 대시보드 / 보고서 | 원래 vs 가중 이중 바 |
| 5 | 태그 자동완성 | 딜/컨택/기업 폼 | 드롭다운 제안 |
| 6 | 컨택 중복 탐지 | 연락처 추가 폼 | 이메일 blur 시 경고 |
| 7 | 알림 패널 | 헤더 벨 아이콘 | 오늘 마감 활동 알림 |
| 8 | 딜 변경 이력 | 딜 상세 타임라인 탭 | 스테이지/금액 이력 |
